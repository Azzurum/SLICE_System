<UserControl x:Class="SLICE_System.Views.ReceiveShipmentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:fa="http://schemas.fontawesome.io/icons/"
             Background="Transparent" FontFamily="Segoe UI">

    <UserControl.Resources>
        <SolidColorBrush x:Key="BayPaper" Color="#FDFBF7"/>
        <SolidColorBrush x:Key="BaySteel" Color="#34495E"/>
        <SolidColorBrush x:Key="PizzaRed" Color="#E74C3C"/>
        <SolidColorBrush x:Key="SuccessGreen" Color="#27AE60"/>
        <SolidColorBrush x:Key="CrateTan" Color="#E5D3B3"/>

        <DataTemplate x:Key="PizzaBoxTemplate">
            <Border Width="140" Height="16" Background="#FDFEFE" BorderBrush="#D0D3D4" BorderThickness="1"
                    CornerRadius="2" Margin="{Binding MarginOffset}">
                <Border.Effect>
                    <DropShadowEffect Color="#7F8C8D" BlurRadius="4" ShadowDepth="2" Opacity="0.3"/>
                </Border.Effect>
                <Border.RenderTransform>
                    <RotateTransform Angle="{Binding RotationAngle}"/>
                </Border.RenderTransform>

                <Grid>
                    <Rectangle Fill="#E74C3C" Width="40" HorizontalAlignment="Left" Margin="10,0,0,0"/>
                    <Rectangle Fill="#F1C40F" Width="5" HorizontalAlignment="Left" Margin="55,0,0,0"/>
                </Grid>
            </Border>
        </DataTemplate>

        <Style TargetType="Button" x:Key="ReceiveButtonStyle">
            <Setter Property="Background" Value="{StaticResource BaySteel}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Height" Value="45"/>
            <Setter Property="Padding" Value="20,0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bdr" Background="{TemplateBinding Background}" CornerRadius="22">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="15,0">
                                <fa:ImageAwesome Icon="Download" Foreground="White" Height="14" Margin="0,0,10,0"/>
                                <TextBlock Text="CONFIRM RECEIPT" FontWeight="Bold" FontSize="12"/>
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="{StaticResource SuccessGreen}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid ClipToBounds="True">
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#FDFBF7" Offset="0"/>
                <GradientStop Color="#F5EBDC" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Canvas Opacity="0.05">
            <Path Data="M0,0 L1000,0 M0,50 L1000,50 M0,100 L1000,100" Stroke="Black" StrokeThickness="1"/>
            <Path Data="M0,0 L0,1000 M50,0 L50,1000 M100,0 L100,1000" Stroke="Black" StrokeThickness="1"/>
        </Canvas>

        <Grid Margin="40">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Margin="0,0,0,30">
                <TextBlock Text="INCOMING DELIVERIES" FontSize="28" FontWeight="Black" Foreground="{StaticResource BaySteel}"/>
                <TextBlock Text="Manage incoming stock transfers to this branch." FontSize="14" Foreground="#95A5A6" Margin="2,5,0,0"/>
                <Separator Background="#D5DBDB" Margin="0,20,0,0"/>
            </StackPanel>

            <StackPanel Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,20,20" Panel.ZIndex="0">
                <TextBlock Text="VOLUME ESTIMATE" FontSize="10" FontWeight="Bold" Foreground="#BDC3C7" HorizontalAlignment="Center" Margin="0,0,0,5"/>

                <ItemsControl x:Name="icPizzaStack" ItemTemplate="{StaticResource PizzaBoxTemplate}" VerticalAlignment="Bottom">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel VerticalAlignment="Bottom"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </StackPanel>

            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Hidden" Margin="0,0,180,0" Panel.ZIndex="1">
                <ItemsControl x:Name="icShipments">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="0,0,0,15" Background="White" CornerRadius="12" BorderBrush="#EBEDEF" BorderThickness="1">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="15" Color="#CCD1D1" ShadowDepth="5" Opacity="0.2"/>
                                </Border.Effect>

                                <Grid Height="90" Margin="20,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Grid Grid.Column="0" VerticalAlignment="Center">
                                        <Ellipse Width="50" Height="50" Fill="#FDF2E9"/>
                                        <fa:ImageAwesome Icon="Truck" Foreground="{StaticResource PizzaRed}" Height="20"/>
                                    </Grid>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="25,0">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="SHIPMENT #" Foreground="#95A5A6" FontSize="10" FontWeight="Bold"/>
                                            <TextBlock Text="{Binding TransferID}" Foreground="{StaticResource BaySteel}" FontSize="12" FontWeight="Bold" Margin="5,0,0,0"/>
                                        </StackPanel>
                                        <TextBlock Text="{Binding FromBranchName, FallbackValue='Main Warehouse'}" FontSize="18" FontWeight="Bold" Foreground="{StaticResource BaySteel}"/>
                                        <TextBlock Text="{Binding SentDate, StringFormat='{}Dispatched on {0:MMM dd, yyyy}'}" FontSize="12" Foreground="#95A5A6"/>
                                    </StackPanel>

                                    <Button Grid.Column="2" VerticalAlignment="Center" Style="{StaticResource ReceiveButtonStyle}"
                                            Click="Receive_Click" Tag="{Binding}"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>

            <StackPanel x:Name="pnlEmptyState" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" Visibility="Collapsed" Panel.ZIndex="2">
                <fa:ImageAwesome Icon="CheckCircle" Foreground="#D5DBDB" Height="80"/>
                <TextBlock Text="ALL CLEAR" FontSize="20" FontWeight="Bold" Foreground="#BDC3C7" HorizontalAlignment="Center" Margin="0,15,0,0"/>
                <TextBlock Text="No shipments currently in-transit." Foreground="#D5DBDB" HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <Grid x:Name="Overlay_Stamp" Visibility="Collapsed" Background="#20000000" Panel.ZIndex="100">
            <Border x:Name="StampBorder" Width="300" Height="150" BorderBrush="{StaticResource PizzaRed}" 
                    BorderThickness="8" CornerRadius="10" RenderTransformOrigin="0.5,0.5">
                <Border.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform x:Name="StampScale" ScaleX="3" ScaleY="3"/>
                        <RotateTransform Angle="-15"/>
                    </TransformGroup>
                </Border.RenderTransform>
                <TextBlock Text="RECEIVED" Foreground="{StaticResource PizzaRed}" FontSize="42" FontWeight="Black" 
                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
        </Grid>

        <Border x:Name="ShutterTop" VerticalAlignment="Top" Height="425" Background="#E5E7E9" BorderBrush="#BDC3C7" BorderThickness="0,0,0,4" Panel.ZIndex="200">
            <fa:ImageAwesome Icon="ArrowDown" Foreground="#BDC3C7" Height="30" VerticalAlignment="Bottom" Margin="20"/>
        </Border>
        <Border x:Name="ShutterBottom" VerticalAlignment="Bottom" Height="425" Background="#E5E7E9" BorderBrush="#BDC3C7" BorderThickness="0,4,0,0" Panel.ZIndex="200">
            <fa:ImageAwesome Icon="ArrowUp" Foreground="#BDC3C7" Height="30" VerticalAlignment="Top" Margin="20"/>
        </Border>
    </Grid>
</UserControl>